'use strict';Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports['default']=exports['constants']=void 0x0;const _fs2=_interopRequireDefault(require('fs')),_util=require('util'),_path=require('path');function _interopRequireDefault(_0x3df088){return _0x3df088&&_0x3df088['__esModule']?_0x3df088:{'default':_0x3df088};}function asyncGeneratorStep(_0x2e1054,_0x4b7f8c,_0x18d2d6,_0x146501,_0x178c65,_0x1c1700,_0x1cdf83){try{var _0x3ecd68=_0x2e1054[_0x1c1700](_0x1cdf83),_0x49a7c2=_0x3ecd68['value'];}catch(_0x4fe41f){_0x18d2d6(_0x4fe41f);return;}_0x3ecd68['done']?_0x4b7f8c(_0x49a7c2):Promise['resolve'](_0x49a7c2)['then'](_0x146501,_0x178c65);}function _asyncToGenerator(_0x26a35d){return function(){const _0x51772a=this,_0x2a7e12=arguments;return new Promise(function(_0x3e470c,_0x20c01){const _0x1d7d3c=_0x26a35d['apply'](_0x51772a,_0x2a7e12);function _0x4dc9d5(_0x364dda){asyncGeneratorStep(_0x1d7d3c,_0x3e470c,_0x20c01,_0x4dc9d5,_0x51db43,'next',_0x364dda);}function _0x51db43(_0x118d2a){asyncGeneratorStep(_0x1d7d3c,_0x3e470c,_0x20c01,_0x4dc9d5,_0x51db43,'throw',_0x118d2a);}_0x4dc9d5(undefined);});};}function _defineProperty(_0x1960ec,_0x300b30,_0x54ad29){return _0x300b30 in _0x1960ec?Object['defineProperty'](_0x1960ec,_0x300b30,{'value':_0x54ad29,'enumerable':!![],'configurable':!![],'writable':!![]}):_0x1960ec[_0x300b30]=_0x54ad29,_0x1960ec;}function _classPrivateMethodGet(_0x479a41,_0x3bad29,_0xb720c3){if(!_0x3bad29['has'](_0x479a41))throw new TypeError('attempted\x20to\x20get\x20private\x20field\x20on\x20non-instance');return _0xb720c3;}const fs={'read':(0x0,_util['promisify'])(_fs2['default']['read']),'write':(0x0,_util['promisify'])(_fs2['default']['write']),'open':(0x0,_util['promisify'])(_fs2['default']['open']),'close':(0x0,_util['promisify'])(_fs2['default']['close'])},nullByte=Buffer['alloc'](0x1);nullByte[0x0]=0x0;const constants={'TYPE_LOSSY':0x0,'TYPE_LOSSLESS':0x1,'TYPE_EXTENDED':0x2};exports['constants']=constants;function VP8Width(_0x48abf4){const _0x2b897c=_0x48abf4[0x7]<<0x8|_0x48abf4[0x6];return _0x2b897c&0x3fff;}function VP8Height(_0x1455ca){const _0x4f597a=_0x1455ca[0x9]<<0x8|_0x1455ca[0x8];return _0x4f597a&0x3fff;}function VP8LWidth(_0x4853e9){const _0x5be6ac=_0x4853e9[0x2]<<0x8|_0x4853e9[0x1];return(_0x5be6ac&0x3fff)+0x1;}function VP8LHeight(_0x2eb1ba){let _0x5d1592=_0x2eb1ba[0x4]<<0x10|_0x2eb1ba[0x3]<<0x8|_0x2eb1ba[0x2];return _0x5d1592=_0x5d1592>>0x6,(_0x5d1592&0x3fff)+0x1;}function doesVP8LHaveAlpha(_0x2ebb99){return!!(_0x2ebb99[0x4]&0x10);}function createBasicChunk(_0x401972,_0x1ea8ad){const _0x3b7dac=Buffer['alloc'](0x8),_0x5cfd30=_0x1ea8ad['length'];let _0x592ae3;return _0x3b7dac['write'](_0x401972,0x0),_0x3b7dac['writeUInt32LE'](_0x5cfd30,0x4),_0x592ae3=[_0x3b7dac,_0x1ea8ad],_0x5cfd30&0x1&&(_0x592ae3[0x2]=nullByte),_0x592ae3;}const _convertToExtended=new WeakSet(),_demuxFrame=new WeakSet(),_readHeader=new WeakSet(),_readChunkHeader=new WeakSet(),_readChunkHeader_buf=new WeakSet(),_readChunk_raw=new WeakSet(),_readChunk_VP=new WeakSet(),_readChunk_VP8_buf=new WeakSet(),_readChunk_VP8L=new WeakSet(),_readChunk_VP8L_buf=new WeakSet(),_readChunk_VP8X=new WeakSet(),_readChunk_ANIM=new WeakSet(),_readChunk_ANMF=new WeakSet(),_readChunk_ALPH=new WeakSet(),_readChunk_ALPH_buf=new WeakSet(),_readChunk_ICCP=new WeakSet(),_readChunk_EXIF=new WeakSet(),_readChunk_XMP=new WeakSet(),_readChunk_Skip=new WeakSet(),_read=new WeakSet();class Image{constructor(){_read['add'](this),_readChunk_Skip['add'](this),_readChunk_XMP['add'](this),_readChunk_EXIF['add'](this),_readChunk_ICCP['add'](this),_readChunk_ALPH_buf['add'](this),_readChunk_ALPH['add'](this),_readChunk_ANMF['add'](this),_readChunk_ANIM['add'](this),_readChunk_VP8X['add'](this),_readChunk_VP8L_buf['add'](this),_readChunk_VP8L['add'](this),_readChunk_VP8_buf['add'](this),_readChunk_VP['add'](this),_readChunk_raw['add'](this),_readChunkHeader_buf['add'](this),_readChunkHeader['add'](this),_readHeader['add'](this),_demuxFrame['add'](this),_convertToExtended['add'](this),_defineProperty(this,'data',null),_defineProperty(this,'loaded',![]),_defineProperty(this,'path','');}['clear'](){this['data']=null,this['path']='',this['loaded']=![];}get['width'](){if(!this['loaded'])return undefined;const _0x56aa0d=this['data'];return _0x56aa0d['extended']?_0x56aa0d['extended']['width']:_0x56aa0d['vp8l']?_0x56aa0d['vp8l']['width']:_0x56aa0d['vp8']?_0x56aa0d['vp8']['width']:undefined;}get['height'](){if(!this['loaded'])return undefined;const _0x37f1fe=this['data'];return _0x37f1fe['extended']?_0x37f1fe['extended']['height']:_0x37f1fe['vp8l']?_0x37f1fe['vp8l']['height']:_0x37f1fe['vp8']?_0x37f1fe['vp8']['height']:undefined;}get['type'](){return this['loaded']?this['data']['type']:undefined;}get['hasAnim'](){return this['loaded']?this['data']['extended']?this['data']['extended']['hasAnim']:![]:![];}get['anim'](){return this['hasAnim']?this['data']['anim']:undefined;}get['frameCount'](){return this['anim']?this['anim']['frameCount']:0x0;}get['iccp'](){return this['data']['extended']?this['data']['extended']['hasICCP']?this['data']['iccp']['raw']:undefined:undefined;}set['iccp'](_0x4559e0){!this['data']['extended']&&_classPrivateMethodGet(this,_convertToExtended,_convertToExtended2)['call'](this),_0x4559e0===undefined?(this['data']['extended']['hasICCP']=![],delete this['data']['iccp']):(this['data']['iccp']={'raw':_0x4559e0},this['data']['extended']['hasICCP']=!![]);}get['exif'](){return this['data']['extended']?this['data']['extended']['hasEXIF']?this['data']['exif']['raw']:undefined:undefined;}set['exif'](_0x1c331b){!this['data']['extended']&&_classPrivateMethodGet(this,_convertToExtended,_convertToExtended2)['call'](this),_0x1c331b===undefined?(this['data']['extended']['hasEXIF']=![],delete this['data']['exif']):(this['data']['exif']={'raw':_0x1c331b},this['data']['extended']['hasEXIF']=!![]);}get['xmp'](){return this['data']['extended']?this['data']['extended']['hasXMP']?this['data']['xmp']['raw']:undefined:undefined;}set['xmp'](_0x4a5ec9){!this['data']['extended']&&_classPrivateMethodGet(this,_convertToExtended,_convertToExtended2)['call'](this),_0x4a5ec9===undefined?(this['data']['extended']['hasXMP']=![],delete this['data']['xmp']):(this['data']['xmp']={'raw':_0x4a5ec9},this['data']['extended']['hasXMP']=!![]);}['load'](_0x2ea47f){const _0x216db5=this;return _asyncToGenerator(function*(){_0x216db5['path']=_0x2ea47f,_0x216db5['data']=yield _classPrivateMethodGet(_0x216db5,_read,_read2)['call'](_0x216db5,_0x2ea47f),_0x216db5['loaded']=!![];})();}['demuxAnim'](_0x1cf24d,_0x4bcbd5=-0x1,_0x1201cb='#FNAME#'){const _0x44827b=this;return _asyncToGenerator(function*(){let _0x337881=0x0,_0x319a8e=_0x44827b['frameCount'];if(_0x319a8e==0x0)throw new Error('This\x20WebP\x20isn\x27t\x20an\x20animation');_0x4bcbd5!=-0x1&&(_0x337881=_0x319a8e=_0x4bcbd5);for(let _0x1f784c=_0x337881;_0x1f784c<=_0x319a8e;_0x1f784c++){yield _classPrivateMethodGet(_0x44827b,_demuxFrame,_demuxFrame2)['call'](_0x44827b,(_0x1cf24d+'/'+_0x1201cb+'_'+_0x1f784c+'.webp')['replace'](/#FNAME#/g,(0x0,_path['basename'])(_0x44827b['path'],'.webp')),_0x44827b['anim']['frames'][_0x1f784c]);}})();}['replaceFrame'](_0x2ca56f,_0x5b64ff){const _0x3a6bfb=this;return _asyncToGenerator(function*(){if(!_0x3a6bfb['hasAnim'])throw new Error('WebP\x20isn\x27t\x20animated');if(_0x5b64ff<0x0||_0x5b64ff>=_0x3a6bfb['frameCount'])throw new Error('Frame\x20index\x20'+_0x5b64ff+'\x20out\x20of\x20bounds\x20(0<=index<'+_0x3a6bfb['frameCount']+')');const _0xed944f=new Image();yield _0xed944f['load'](_0x2ca56f);switch(_0xed944f['type']){case constants['TYPE_LOSSY']:case constants['TYPE_LOSSLESS']:break;case constants['TYPE_EXTENDED']:if(_0xed944f['hasAnim'])throw new Error('Merging\x20animations\x20not\x20currently\x20supported');break;default:throw new Error('Unknown\x20WebP\x20type');}switch(_0x3a6bfb['anim']['frames'][_0x5b64ff]['type']){case constants['TYPE_LOSSY']:_0x3a6bfb['anim']['frames'][_0x5b64ff]['vp8']['alpha']&&delete _0x3a6bfb['anim']['frames'][_0x5b64ff]['alph'];delete _0x3a6bfb['anim']['frames'][_0x5b64ff]['vp8'];break;case constants['TYPE_LOSSLESS']:delete _0x3a6bfb['anim']['frames'][_0x5b64ff]['vp8l'];break;default:throw new Error('Unknown\x20frame\x20type');}switch(_0xed944f['type']){case constants['TYPE_LOSSY']:_0x3a6bfb['anim']['frames'][_0x5b64ff]['vp8']=_0xed944f['data']['vp8'];break;case constants['TYPE_LOSSLESS']:_0x3a6bfb['anim']['frames'][_0x5b64ff]['vp8l']=_0xed944f['data']['vp8l'];break;case constants['TYPE_EXTENDED']:if(_0xed944f['data']['vp8'])_0x3a6bfb['anim']['frames'][_0x5b64ff]['vp8']=_0xed944f['data']['vp8'],_0xed944f['data']['vp8']['alpha']&&(_0x3a6bfb['anim']['frames'][_0x5b64ff]['alph']=_0xed944f['data']['alph']);else _0xed944f['data']['vp8l']&&(_0x3a6bfb['anim']['frames'][_0x5b64ff]['vp8l']=_0xed944f['data']['vp8l']);break;}_0x3a6bfb['anim']['frames'][_0x5b64ff]['width']=_0xed944f['width'],_0x3a6bfb['anim']['frames'][_0x5b64ff]['height']=_0xed944f['height'];})();}['muxAnim']({path:_0x10128e,bgColor:bgColor=[0xff,0xff,0xff,0xff],loops:loops=0x0}={}){const _0x5bea4c=this;return _asyncToGenerator(function*(){return Image['muxAnim']({'path':_0x10128e,'bgColor':bgColor,'loops':loops,'frames':_0x5bea4c['frames']});})();}static['muxAnim']({path:_0x4e10e2,frames:_0x2abcde,width:width=0x0,height:height=0x0,bgColor:bgColor=[0xff,0xff,0xff,0xff],loops:loops=0x0,delay:delay=0x64,x:x=0x0,y:y=0x0,blend:blend=!![],dispose:dispose=![]}={}){return _asyncToGenerator(function*(){const _0x4fac32=Buffer['alloc'](0xc);let _0x27561b=Buffer['alloc'](0x12);const _0x82e156=[];let _0xbe794f,_0xbe8d19=![],_0x55cdbe,_0xb5b734=0x0,_0x2b2d8b=0x0;const _0x3df35c=width-0x1,_0x3a6f79=height-0x1;if(_0x2abcde['length']==0x0)throw new Error('No\x20frames\x20to\x20mux');else{if(_0x3df35c<=0x0||_0x3df35c>0x1<<0x18)throw new Error('Width\x20out\x20of\x20range');else{if(_0x3a6f79<=0x0||_0x3a6f79>0x1<<0x18)throw new Error('Height\x20out\x20of\x20range');else{if(_0x3a6f79*_0x3df35c>Math['pow'](0x2,0x20)-0x1)throw new Error('Width*height\x20too\x20large\x20('+_0x3df35c+',\x20'+_0x3a6f79+')');else{if(loops<0x0||loops>=0x1<<0x18)throw new Error('Loops\x20out\x20of\x20range');else{if(delay<0x0||delay>=0x1<<0x18)throw new Error('Delay\x20out\x20of\x20range');else{if(x<0x0||x>=0x1<<0x18)throw new Error('X\x20out\x20of\x20range');else{if(y<0x0||y>=0x1<<0x18)throw new Error('Y\x20out\x20of\x20range');}}}}}}}_0x4fac32['write']('RIFF',0x0),_0x4fac32['write']('WEBP',0x8),_0x27561b['write']('VP8X',0x0),_0x27561b['writeUInt32LE'](0xa,0x4),_0x27561b[0x8]|=0x2;width!=0x0&&_0x27561b['writeUIntLE'](_0x3df35c,0xc,0x3);height!=0x0&&_0x27561b['writeUIntLE'](_0x3a6f79,0xf,0x3);_0x82e156['push'](_0x4fac32,_0x27561b),_0x27561b=Buffer['alloc'](0xe),_0x27561b['write']('ANIM',0x0),_0x27561b['writeUInt32LE'](0x6,0x4),_0x27561b['writeUInt8'](bgColor[0x2],0x8),_0x27561b['writeUInt8'](bgColor[0x1],0x9),_0x27561b['writeUInt8'](bgColor[0x0],0xa),_0x27561b['writeUInt8'](bgColor[0x3],0xb),_0x27561b['writeUInt16LE'](loops,0xc),_0x82e156['push'](_0x27561b);for(let _0x18227c=0x0,_0x53b62f=_0x2abcde['length'];_0x18227c<_0x53b62f;_0x18227c++){const _0x44ade4=typeof _0x2abcde[_0x18227c]['delay']==='undefined'?delay:_0x2abcde[_0x18227c]['delay'],_0x54254d=typeof _0x2abcde[_0x18227c]['x']==='undefined'?x:_0x2abcde[_0x18227c]['x'],_0x19467d=typeof _0x2abcde[_0x18227c]['y']==='undefined'?y:_0x2abcde[_0x18227c]['y'],_0xfabc21=typeof _0x2abcde[_0x18227c]['blend']==='undefined'?blend:_0x2abcde[_0x18227c]['blend'],_0x2dad42=typeof _0x2abcde[_0x18227c]['dispose']==='undefined'?dispose:_0x2abcde[_0x18227c]['dispose'];let _0x51b4ea=0x10,_0x3e5056=!![],_0x173109;if(delay<0x0||delay>=0x1<<0x18)throw new Error('Delay\x20out\x20of\x20range\x20on\x20frame\x20'+_0x18227c);else{if(x<0x0||x>=0x1<<0x18)throw new Error('X\x20out\x20of\x20range\x20on\x20frame\x20'+_0x18227c);else{if(y<0x0||y>=0x1<<0x18)throw new Error('Y\x20out\x20of\x20range\x20on\x20frame\x20'+_0x18227c);}}_0x27561b=Buffer['alloc'](0x18),_0x27561b['write']('ANMF',0x0),_0x27561b['writeUIntLE'](_0x54254d,0x8,0x3),_0x27561b['writeUIntLE'](_0x19467d,0xb,0x3),_0x27561b['writeUIntLE'](_0x44ade4,0x14,0x3);!_0xfabc21&&(_0x27561b[0x17]|=0x2);_0x2dad42&&(_0x27561b[0x17]|=0x1);_0x2abcde[_0x18227c]['path']?(_0xbe794f=new Image(),yield _0xbe794f['load'](_0x2abcde[_0x18227c]['path'])):_0xbe794f={'data':_0x2abcde[_0x18227c]};_0x27561b['writeUIntLE'](_0xbe794f['data']['width']-0x1,0xe,0x3),_0x27561b['writeUIntLE'](_0xbe794f['data']['height']-0x1,0x11,0x3);switch(_0xbe794f['data']['type']){case constants['TYPE_LOSSY']:{const _0x5603b1=_0xbe794f['data']['vp8'];_0xb5b734=_0x5603b1['width']>_0xb5b734?_0x5603b1['width']:_0xb5b734,_0x2b2d8b=_0x5603b1['height']>_0x2b2d8b?_0x5603b1['height']:_0x2b2d8b,_0x51b4ea+=_0x5603b1['raw']['length']+0x8,_0x173109=createBasicChunk('VP8\x20',_0x5603b1['raw']);}break;case constants['TYPE_LOSSLESS']:{const _0x772d04=_0xbe794f['data']['vp8l'];_0xb5b734=_0x772d04['width']>_0xb5b734?_0x772d04['width']:_0xb5b734,_0x2b2d8b=_0x772d04['height']>_0x2b2d8b?_0x772d04['height']:_0x2b2d8b,_0x51b4ea+=_0x772d04['raw']['length']+0x8,_0x772d04['alpha']&&(_0xbe8d19=!![]),_0x173109=createBasicChunk('VP8L',_0x772d04['raw']);}break;case constants['TYPE_EXTENDED']:if(_0xbe794f['data']['extended']['hasAnim']){const _0x3eecc4=_0xbe794f['data']['anim']['frames'];_0x3e5056=![];_0xbe794f['data']['extended']['hasAlpha']&&(_0xbe8d19=!![]);for(let _0xb2f83f=0x0,_0x45a045=_0x3eecc4['length'];_0xb2f83f<_0x45a045;_0xb2f83f++){_0xb5b734=_0x3eecc4[_0xb2f83f]['width']+_0x54254d>_0xb5b734?_0x3eecc4[_0xb2f83f]['width']+_0x54254d:_0xb5b734,_0x2b2d8b=_0x3eecc4[_0xb2f83f]['height']+_0x19467d>_0x2b2d8b?_0x3eecc4[_0xb2f83f]['height']+_0x19467d:_0x2b2d8b;let _0x536862=Buffer['alloc'](0x8);_0x536862['write']('ANMF',0x0),_0x536862['writeUInt32LE'](_0x3eecc4[_0xb2f83f]['raw']['length'],0x4),_0x82e156['push'](_0x536862,_0x3eecc4[_0xb2f83f]['raw']),_0x3eecc4[_0xb2f83f]['raw']['length']&0x1&&_0x82e156['push'](nullByte),_0x536862=_0x3eecc4[_0xb2f83f]['raw'],_0x536862['writeUIntLE'](_0x54254d,0x0,0x3),_0x536862['writeUIntLE'](_0x19467d,0x3,0x3),_0x536862['writeUIntLE'](_0x44ade4,0xc,0x3),!_0xfabc21?_0x536862[0xf]|=0x2:_0x536862[0xf]&=0xfd,_0x2dad42?_0x536862[0xf]|=0x1:_0x536862[0xf]&=0xfe;}}else{_0xb5b734=_0xbe794f['data']['extended']['width']>_0xb5b734?_0xbe794f['data']['extended']['width']:_0xb5b734,_0x2b2d8b=_0xbe794f['data']['extended']['height']>_0x2b2d8b?_0xbe794f['data']['extended']['height']:_0x2b2d8b;if(_0xbe794f['data']['vp8'])_0x173109=[],_0xbe794f['data']['alph']&&(_0xbe8d19=!![],_0x173109['push'](...createBasicChunk('ALPH',_0xbe794f['data']['alph']['raw'])),_0x51b4ea+=_0xbe794f['data']['alph']['raw']['length']+0x8),_0x173109['push'](...createBasicChunk('VP8\x20',_0xbe794f['data']['vp8']['raw'])),_0x51b4ea+=_0xbe794f['data']['vp8']['raw']['length']+0x8;else _0xbe794f['data']['vp8l']&&(_0x173109=createBasicChunk('VP8L',_0xbe794f['data']['vp8l']['raw']),_0xbe794f['data']['vp8l']['alpha']&&(_0xbe8d19=!![]),_0x51b4ea+=_0xbe794f['data']['vp8l']['raw']['length']+0x8);}break;default:throw new Error('Unknown\x20image\x20type');}_0x3e5056&&(_0x27561b['writeUInt32LE'](_0x51b4ea,0x4),_0x82e156['push'](_0x27561b,..._0x173109));}width==0x0&&_0x82e156[0x1]['writeUIntLE'](_0xb5b734-0x1,0xc,0x3);height==0x0&&_0x82e156[0x1]['writeUIntLE'](_0x2b2d8b-0x1,0xf,0x3);_0x55cdbe=0x4;for(let _0x4fa81e=0x1,_0x452c72=_0x82e156['length'];_0x4fa81e<_0x452c72;_0x4fa81e++){_0x55cdbe+=_0x82e156[_0x4fa81e]['length'];}_0x4fac32['writeUInt32LE'](_0x55cdbe,0x4);_0xbe8d19&&(_0x82e156[0x1][0x8]|=0x10);const _0x37ed24=yield fs['open'](_0x4e10e2,'w');for(let _0x419d5e=0x0,_0x16df78=_0x82e156['length'];_0x419d5e<_0x16df78;_0x419d5e++){yield fs['write'](_0x37ed24,_0x82e156[_0x419d5e],0x0,undefined,undefined);}yield fs['close'](_0x37ed24);})();}}var _convertToExtended2=function _convertToExtended2(){if(!this['loaded'])throw new Error('No\x20image\x20loaded');this['data']['type']=constants['TYPE_EXTENDED'],this['data']['extended']={'hasICC':![],'hasAlpha':![],'hasEXIF':![],'hasXMP':![],'width':this['vp8']?this['vp8']['width']:this['vp8l']?this['vp8l']['width']:0x1,'height':this['vp8']?this['vp8']['height']:this['vp8l']?this['vp8l']['height']:0x1};},_demuxFrame2=(function(){const _0x26ce0d=_asyncToGenerator(function*(_0xfecf2c,_0x53c812){const _0x21dab7=Buffer['alloc'](0xc);let _0x53b96c,_0xd73bbc;const _0x3c2406=[];_0x21dab7['write']('RIFF',0x0),_0x21dab7['write']('WEBP',0x8),_0x3c2406['push'](_0x21dab7);(this['data']['extended']['hasICC']||this['data']['extended']['hasEXIF']||this['data']['extended']['hasXMP']||_0x53c812['vp8']&&_0x53c812['vp8']['alpha'])&&(_0xd73bbc=Buffer['alloc'](0x12),_0xd73bbc['write']('VP8X',0x0),_0xd73bbc['writeUInt32LE'](0xa,0x4),this['data']['extended']['hasICC']&&(_0xd73bbc[0x8]|=0x20),(_0x53c812['vp8l']&&_0x53c812['vp8l']['alpha']||_0x53c812['vp8']&&_0x53c812['vp8']['alpha'])&&(_0xd73bbc[0x8]|=0x10),this['data']['extended']['hasEXIF']&&(_0xd73bbc[0x8]|=0x8),this['data']['extended']['hasXMP']&&(_0xd73bbc[0x8]|=0x4),_0xd73bbc['writeUIntLE'](_0x53c812['width']-0x1,0xc,0x3),_0xd73bbc['writeUIntLE'](_0x53c812['height']-0x1,0xf,0x3),_0x3c2406['push'](_0xd73bbc),this['data']['extended']['hasICC']&&_0x3c2406['push'](...createBasicChunk('ICCP',this['data']['extended']['icc']['raw'])));if(_0x53c812['vp8l'])_0x3c2406['push'](...createBasicChunk('VP8L',_0x53c812['vp8l']['raw']));else{if(_0x53c812['vp8'])_0x53c812['vp8']['alpha']&&_0x3c2406['push'](...createBasicChunk('ALPH',_0x53c812['alph']['raw'])),_0x3c2406['push'](...createBasicChunk('VP8\x20',_0x53c812['vp8']['raw']));else throw new Error('Frame\x20has\x20no\x20VP8/VP8L?');}this['type']==constants['TYPE_EXTENDED']&&(this['data']['extended']['hasEXIF']&&_0x3c2406['push'](...createBasicChunk('EXIF',this['data']['extended']['exif']['raw'])),this['data']['extended']['hasXMP']&&_0x3c2406['push'](...createBasicChunk('XMP\x20',this['data']['extended']['xmp']['raw'])));_0x53b96c=0x4;for(let _0x133e79=0x1,_0x2847c5=_0x3c2406['length'];_0x133e79<_0x2847c5;_0x133e79++){_0x53b96c+=_0x3c2406[_0x133e79]['length'];}_0x21dab7['writeUInt32LE'](_0x53b96c,0x4);const _0x14f65f=yield fs['open'](_0xfecf2c,'w');for(let _0x30ba75=0x0,_0x4eabe1=_0x3c2406['length'];_0x30ba75<_0x4eabe1;_0x30ba75++){yield fs['write'](_0x14f65f,_0x3c2406[_0x30ba75],0x0,undefined,undefined);}yield fs['close'](_0x14f65f);});function _0x308f61(_0xe712d6,_0x39faab){return _0x26ce0d['apply'](this,arguments);}return _0x308f61;}());const _readHeader2=(function(){const _0x385a8=_asyncToGenerator(function*(_0x1c36b2){const _0x5253f4=Buffer['alloc'](0xc),{bytesRead:_0x5a2385}=yield fs['read'](_0x1c36b2,_0x5253f4,0x0,0xc,undefined);if(_0x5a2385!=0xc)throw new Error('Reached\x20end\x20of\x20file\x20while\x20reading\x20header');if(_0x5253f4['toString']('utf8',0x0,0x4)!='RIFF')throw new Error('Bad\x20header\x20(not\x20RIFF)');if(_0x5253f4['toString']('utf8',0x8,0xc)!='WEBP')throw new Error('Bad\x20header\x20(not\x20WEBP)');return{'fileSize':_0x5253f4['readUInt32LE'](0x4)};});function _0x1df4f1(_0x32bdf0){return _0x385a8['apply'](this,arguments);}return _0x1df4f1;}()),_readChunkHeader2=(function(){const _0x5bd833=_asyncToGenerator(function*(_0x1c4f06){const _0x19b9f3=Buffer['alloc'](0x8),{bytesRead:_0x166a1b}=yield fs['read'](_0x1c4f06,_0x19b9f3,0x0,0x8,undefined);if(_0x166a1b==0x0)return{'fourCC':'\x00\x00\x00\x00','size':0x0};else{if(_0x166a1b<0x8)throw new Error('Reached\x20end\x20of\x20file\x20while\x20reading\x20chunk\x20header');}return{'fourCC':_0x19b9f3['toString']('utf8',0x0,0x4),'size':_0x19b9f3['readUInt32LE'](0x4)};});function _0x508f24(_0x52f618){return _0x5bd833['apply'](this,arguments);}return _0x508f24;}()),_readChunkHeader_buf2=function _readChunkHeader_buf2(_0x57bb53,_0x5eec7c){if(_0x5eec7c>=_0x57bb53['length'])return{'fourCC':'\x00\x00\x00\x00','size':0x0};return{'fourCC':_0x57bb53['toString']('utf8',_0x5eec7c,_0x5eec7c+0x4),'size':_0x57bb53['readUInt32LE'](_0x5eec7c+0x4)};},_readChunk_raw2=(function(){const _0x41026c=_asyncToGenerator(function*(_0x1db350,_0x4892cc,_0x365dab){const _0x52c688=Buffer['alloc'](_0x365dab),_0x9a12b7=Buffer['alloc'](0x1),{bytesRead:_0x59fadf}=yield fs['read'](_0x4892cc,_0x52c688,0x0,_0x365dab,undefined);if(_0x59fadf!=_0x365dab)throw new Error('Reached\x20end\x20of\x20file\x20while\x20reading\x20'+_0x1db350+'\x20chunk');return _0x365dab&0x1&&(yield fs['read'](_0x4892cc,_0x9a12b7,0x0,0x1,undefined)),{'raw':_0x52c688};});function _0x2d9fa2(_0x1eb70b,_0x2dc288,_0x3de818){return _0x41026c['apply'](this,arguments);}return _0x2d9fa2;}()),_readChunk_VP2=(function(){const _0x366edd=_asyncToGenerator(function*(_0x5841b1,_0x47174e){const _0x42dbd8=Buffer['alloc'](_0x47174e),_0x574e5e=Buffer['alloc'](0x1),{bytesRead:_0x25c38f}=yield fs['read'](_0x5841b1,_0x42dbd8,0x0,_0x47174e,undefined);if(_0x25c38f!=_0x47174e)throw new Error('Reached\x20end\x20of\x20file\x20while\x20reading\x20VP8\x20chunk');return _0x47174e&0x1&&(yield fs['read'](_0x5841b1,_0x574e5e,0x0,0x1,undefined)),{'raw':_0x42dbd8,'width':VP8Width(_0x42dbd8,0x8),'height':VP8Height(_0x42dbd8,0x8)};});function _0x43a0fb(_0x1bb3d2,_0x51e7a1){return _0x366edd['apply'](this,arguments);}return _0x43a0fb;}()),_readChunk_VP8_buf2=function _readChunk_VP8_buf2(_0x11e895,_0x458a52,_0x5983a0){if(_0x5983a0>=_0x11e895['length'])throw new Error('Reached\x20end\x20of\x20buffer\x20while\x20reading\x20VP8\x20chunk');const _0xc63f75=_0x11e895['slice'](_0x5983a0,_0x5983a0+_0x458a52);return{'raw':_0xc63f75,'width':VP8Width(_0xc63f75),'height':VP8Height(_0xc63f75)};},_readChunk_VP8L2=(function(){const _0x20324e=_asyncToGenerator(function*(_0xf10db8,_0x2abb0d){const _0x549c95=Buffer['alloc'](_0x2abb0d),_0x5ea6a0=Buffer['alloc'](0x1),{bytesRead:_0x43a420}=yield fs['read'](_0xf10db8,_0x549c95,0x0,_0x2abb0d,undefined);if(_0x43a420!=_0x2abb0d)throw new Error('Reached\x20end\x20of\x20file\x20while\x20reading\x20VP8L\x20chunk');return _0x2abb0d&0x1&&(yield fs['read'](_0xf10db8,_0x5ea6a0,0x0,0x1,undefined)),{'raw':_0x549c95,'alpha':doesVP8LHaveAlpha(_0x549c95,0x0),'width':VP8LWidth(_0x549c95),'height':VP8LHeight(_0x549c95)};});function _0x252f14(_0x5b21fa,_0x4c3f43){return _0x20324e['apply'](this,arguments);}return _0x252f14;}()),_readChunk_VP8L_buf2=function _readChunk_VP8L_buf2(_0x28c7aa,_0x5404c0,_0x5c4169){if(_0x5c4169>=_0x28c7aa['length'])throw new Error('Reached\x20end\x20of\x20buffer\x20while\x20reading\x20VP8L\x20chunk');const _0x5308b0=_0x28c7aa['slice'](_0x5c4169,_0x5c4169+_0x5404c0);return{'raw':_0x5308b0,'alpha':doesVP8LHaveAlpha(_0x5308b0),'width':VP8LWidth(_0x5308b0),'height':VP8LHeight(_0x5308b0)};},_readChunk_VP8X2=(function(){const _0x47697c=_asyncToGenerator(function*(_0x3f5008,_0x385add){const _0x39b0c8=Buffer['alloc'](_0x385add),{bytesRead:_0xb53595}=yield fs['read'](_0x3f5008,_0x39b0c8,0x0,_0x385add,undefined);if(_0xb53595!=_0x385add)throw new Error('Reached\x20end\x20of\x20file\x20while\x20reading\x20VP8X\x20chunk');return{'raw':_0x39b0c8,'hasICC':!!(_0x39b0c8[0x0]&0x20),'hasAlpha':!!(_0x39b0c8[0x0]&0x10),'hasEXIF':!!(_0x39b0c8[0x0]&0x8),'hasXMP':!!(_0x39b0c8[0x0]&0x4),'hasAnim':!!(_0x39b0c8[0x0]&0x2),'width':_0x39b0c8['readUIntLE'](0x4,0x3)+0x1,'height':_0x39b0c8['readUIntLE'](0x7,0x3)+0x1};});function _0x2cbf3b(_0x509607,_0x1f43e5){return _0x47697c['apply'](this,arguments);}return _0x2cbf3b;}()),_readChunk_ANIM2=(function(){const _0x3aa12a=_asyncToGenerator(function*(_0x2ec790,_0x368463){const _0x3f9339=Buffer['alloc'](_0x368463),{bytesRead:_0x1d1f81}=yield fs['read'](_0x2ec790,_0x3f9339,0x0,_0x368463,undefined);if(_0x1d1f81!=_0x368463)throw new Error('Reached\x20end\x20of\x20file\x20while\x20reading\x20ANIM\x20chunk');return{'raw':_0x3f9339,'bgColor':_0x3f9339['slice'](0x0,0x4),'loopCount':_0x3f9339['readUInt16LE'](0x4)};});function _0x7b0eaa(_0x2a375c,_0x4c4e20){return _0x3aa12a['apply'](this,arguments);}return _0x7b0eaa;}()),_readChunk_ANMF2=(function(){const _0x2b77d1=_asyncToGenerator(function*(_0x4e01fc,_0xd538a5){const _0x10a588=Buffer['alloc'](_0xd538a5),_0x1a6c37=Buffer['alloc'](0x1),{bytesRead:_0x46d16a}=yield fs['read'](_0x4e01fc,_0x10a588,0x0,_0xd538a5,undefined);if(_0x46d16a!=_0xd538a5)throw new Error('Reached\x20end\x20of\x20file\x20while\x20reading\x20ANMF\x20chunk');_0xd538a5&0x1&&(yield fs['read'](_0x4e01fc,_0x1a6c37,0x0,0x1,undefined));const _0x6d61ac={'raw':_0x10a588,'x':_0x10a588['readUIntLE'](0x0,0x3),'y':_0x10a588['readUIntLE'](0x3,0x3),'width':_0x10a588['readUIntLE'](0x6,0x3)+0x1,'height':_0x10a588['readUIntLE'](0x9,0x3)+0x1,'duration':_0x10a588['readUIntLE'](0xc,0x3),'blend':!(_0x10a588[0xf]&0x2),'dispose':!!(_0x10a588[0xf]&0x1)};let _0x1f6301=!![],_0x35bedb=0x10;while(_0x1f6301){const _0x1f9cd3=_classPrivateMethodGet(this,_readChunkHeader_buf,_readChunkHeader_buf2)['call'](this,_0x10a588,_0x35bedb);let _0x4e2475;_0x35bedb+=0x8;switch(_0x1f9cd3['fourCC']){case'VP8\x20':!_0x6d61ac['vp8']&&(_0x6d61ac['type']=constants['TYPE_LOSSY'],_0x6d61ac['vp8']=_classPrivateMethodGet(this,_readChunk_VP8_buf,_readChunk_VP8_buf2)['call'](this,_0x10a588,_0x1f9cd3['size'],_0x35bedb));break;case'VP8L':!_0x6d61ac['vp8l']&&(_0x6d61ac['type']=constants['TYPE_LOSSLESS'],_0x6d61ac['vp8l']=_classPrivateMethodGet(this,_readChunk_VP8L_buf,_readChunk_VP8L_buf2)['call'](this,_0x10a588,_0x1f9cd3['size'],_0x35bedb));break;case'ALPH':_0x6d61ac['vp8']&&(_0x6d61ac['alph']=_classPrivateMethodGet(this,_readChunk_ALPH_buf,_readChunk_ALPH_buf2)['call'](this,_0x10a588,_0x1f9cd3['size'],_0x35bedb),_0x6d61ac['vp8']['alpha']=!![]);break;case'\x00\x00\x00\x00':default:_0x1f6301=![];break;}_0x35bedb+=_0x1f9cd3['size']+0x1,_0x1f9cd3['size']&0x1&&_0x35bedb++,_0x35bedb>=_0x10a588['length']&&(_0x1f6301=![]);}return _0x6d61ac;});function _0x504fe2(_0x3f8c1d,_0x35b9e5){return _0x2b77d1['apply'](this,arguments);}return _0x504fe2;}()),_readChunk_ALPH2=(function(){const _0x3c228c=_asyncToGenerator(function*(_0x10f21c,_0x3d1936){return _classPrivateMethodGet(this,_readChunk_raw,_readChunk_raw2)['call'](this,'ALPH',_0x10f21c,_0x3d1936);});function _0x2310ff(_0x2c68a0,_0x4df390){return _0x3c228c['apply'](this,arguments);}return _0x2310ff;}());var _readChunk_ALPH_buf2=function _readChunk_ALPH_buf2(_0x90d28f,_0x585394,_0x216598){if(cusor>=_0x90d28f['length'])throw new Error('Reached\x20end\x20of\x20buffer\x20while\x20reading\x20ALPH\x20chunk');return{'raw':_0x90d28f['slice'](_0x216598,_0x216598+_0x585394)};};const _readChunk_ICCP2=(function(){const _0x56cbaf=_asyncToGenerator(function*(_0x20bbc4,_0x3c0f38){return _classPrivateMethodGet(this,_readChunk_raw,_readChunk_raw2)['call'](this,'ICCP',_0x20bbc4,_0x3c0f38);});function _0x401c8c(_0x46807a,_0x45cbd1){return _0x56cbaf['apply'](this,arguments);}return _0x401c8c;}()),_readChunk_EXIF2=(function(){const _0x2514f4=_asyncToGenerator(function*(_0x48ae13,_0x398335){return _classPrivateMethodGet(this,_readChunk_raw,_readChunk_raw2)['call'](this,'EXIF',_0x48ae13,_0x398335);});function _0x7b4e22(_0x169500,_0xb44759){return _0x2514f4['apply'](this,arguments);}return _0x7b4e22;}()),_readChunk_XMP2=(function(){const _0xfce08d=_asyncToGenerator(function*(_0x17f544,_0x36d9d4){return _classPrivateMethodGet(this,_readChunk_raw,_readChunk_raw2)['call'](this,'XML',_0x17f544,_0x36d9d4);});function _0x534b2c(_0x4c00df,_0x1c724d){return _0xfce08d['apply'](this,arguments);}return _0x534b2c;}()),_readChunk_Skip2=(function(){const _0x1d7675=_asyncToGenerator(function*(_0x3ca5d9,_0x26fc8d){const _0x43e7d9=Buffer['alloc'](_0x26fc8d),_0x32b125=Buffer['alloc'](0x1),{bytesRead:_0x448f7f}=yield fs['read'](_0x3ca5d9,_0x43e7d9,0x0,_0x26fc8d,undefined);if(_0x448f7f!=_0x26fc8d)throw new Error('Reached\x20end\x20of\x20file\x20while\x20skipping\x20chunk');_0x26fc8d&0x1&&(yield fs['read'](_0x3ca5d9,_0x32b125,0x0,0x1,undefined));});function _0x25eb1b(_0x3a6f1f,_0x2f2035){return _0x1d7675['apply'](this,arguments);}return _0x25eb1b;}());var _read2=(function(){const _0x25f1ef=_asyncToGenerator(function*(_0x40f012){const _0x1c2689=yield fs['open'](_0x40f012,'r'),_0x45bf15={};let _0x59383c=!![],_0x2c93c6=!![];const {fileSize:_0x30e040}=yield _classPrivateMethodGet(this,_readHeader,_readHeader2)['call'](this,_0x1c2689);while(_0x59383c){const {fourCC:_0x2a292b,size:_0x2e4557}=yield _classPrivateMethodGet(this,_readChunkHeader,_readChunkHeader2)['call'](this,_0x1c2689);switch(_0x2a292b){case'VP8\x20':!_0x45bf15['vp8']?_0x45bf15['vp8']=yield _classPrivateMethodGet(this,_readChunk_VP,_readChunk_VP2)['call'](this,_0x1c2689,_0x2e4557):yield _classPrivateMethodGet(this,_readChunk_Skip,_readChunk_Skip2)['call'](this,_0x1c2689,_0x2e4557);_0x2c93c6&&(_0x45bf15['type']=constants['TYPE_LOSSY'],_0x59383c=![]);break;case'VP8L':!_0x45bf15['vp8l']?_0x45bf15['vp8l']=yield _classPrivateMethodGet(this,_readChunk_VP8L,_readChunk_VP8L2)['call'](this,_0x1c2689,_0x2e4557):yield _classPrivateMethodGet(this,_readChunk_Skip,_readChunk_Skip2)['call'](this,_0x1c2689,_0x2e4557);_0x2c93c6&&(_0x45bf15['type']=constants['TYPE_LOSSLESS'],_0x59383c=![]);break;case'VP8X':!_0x45bf15['extended']?(_0x45bf15['type']=constants['TYPE_EXTENDED'],_0x45bf15['extended']=yield _classPrivateMethodGet(this,_readChunk_VP8X,_readChunk_VP8X2)['call'](this,_0x1c2689,_0x2e4557)):yield _classPrivateMethodGet(this,_readChunk_Skip,_readChunk_Skip2)['call'](this,_0x1c2689,_0x2e4557);break;case'ANIM':if(!_0x45bf15['anim']){const {raw:_0x4d0c30,bgColor:_0x5474ec,loopCount:_0x106145}=yield _classPrivateMethodGet(this,_readChunk_ANIM,_readChunk_ANIM2)['call'](this,_0x1c2689,_0x2e4557);_0x45bf15['anim']={'backgroundColor':[_0x5474ec[0x2],_0x5474ec[0x1],_0x5474ec[0x0],_0x5474ec[0x3]],'loopCount':_0x106145,'frames':[]},_0x45bf15['anim']['raw']=_0x4d0c30;}else yield _classPrivateMethodGet(this,_readChunk_Skip,_readChunk_Skip2)['call'](this,_0x1c2689,_0x2e4557);break;case'ANMF':{const _0xcb80aa=yield _classPrivateMethodGet(this,_readChunk_ANMF,_readChunk_ANMF2)['call'](this,_0x1c2689,_0x2e4557);_0x45bf15['anim']['frames']['push'](_0xcb80aa);}break;case'ALPH':!_0x45bf15['alph']?_0x45bf15['alph']=yield _classPrivateMethodGet(this,_readChunk_ALPH,_readChunk_ALPH2)['call'](this,_0x1c2689,_0x2e4557):yield _classPrivateMethodGet(this,_readChunk_Skip,_readChunk_Skip2)['call'](this,_0x1c2689,_0x2e4557);break;case'ICCP':!_0x45bf15['iccp']?_0x45bf15['iccp']=yield _classPrivateMethodGet(this,_readChunk_ICCP,_readChunk_ICCP2)['call'](this,_0x1c2689,_0x2e4557):yield _classPrivateMethodGet(this,_readChunk_Skip,_readChunk_Skip2)['call'](this,_0x1c2689,_0x2e4557);break;case'EXIF':!_0x45bf15['exif']?_0x45bf15['exif']=yield _classPrivateMethodGet(this,_readChunk_EXIF,_readChunk_EXIF2)['call'](this,_0x1c2689,_0x2e4557):yield _classPrivateMethodGet(this,_readChunk_Skip,_readChunk_Skip2)['call'](this,_0x1c2689,_0x2e4557);break;case'XMP\x20':!_0x45bf15['xmp']?_0x45bf15['xmp']=yield _classPrivateMethodGet(this,_readChunk_XMP,_readChunk_XMP2)['call'](this,_0x1c2689,_0x2e4557):yield _classPrivateMethodGet(this,_readChunk_Skip,_readChunk_Skip2)['call'](this,_0x1c2689,_0x2e4557);break;case'\x00\x00\x00\x00':_0x59383c=![];break;default:yield _classPrivateMethodGet(this,_readChunk_Skip,_readChunk_Skip2)['call'](this,_0x1c2689,_0x2e4557);break;}_0x2c93c6=![];}return _0x45bf15['type']==constants['TYPE_EXTENDED']&&_0x45bf15['extended']['hasAnim']&&(_0x45bf15['anim']['frameCount']=_0x45bf15['anim']['frames']['length']),_0x45bf15;});function _0x44795c(_0x3b310f){return _0x25f1ef['apply'](this,arguments);}return _0x44795c;}());const _default={'TYPE_LOSSY':constants['TYPE_LOSSY'],'TYPE_LOSSLESS':constants['TYPE_LOSSLESS'],'TYPE_EXTENDED':constants['TYPE_EXTENDED'],'Image':Image};exports['default']=_default;