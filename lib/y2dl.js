import{stat}from'fs';import _0x2b39ef from'node-fetch';const sleep=async _0x4ad7f3=>new Promise(_0x389d9e=>setTimeout(_0x389d9e,_0x4ad7f3)),bestFormat=(_0x5199d1,_0x3f0817)=>new Promise(async(_0x504078,_0x461ae0)=>{const _0x52edeb=await _0x2b39ef('https://srvcdn8.2convert.me/api/json?url='+_0x5199d1,{'method':'GET','headers':{'origin':'https://en1.y2mate.is','referer':'https://en1.y2mate.is/','user-agent':'Mozilla/5.0\x20(Windows\x20NT\x2010.0;\x20Win64;\x20x64)\x20AppleWebKit/537.36\x20(KHTML,\x20like\x20Gecko)\x20Chrome/113.0.0.0\x20Safari/537.36\x20OPR/99.0.0.0'}}),_0x52e7fc=await _0x52edeb['json']();if(_0x52e7fc['error']==!![])_0x461ae0(![]);const _0x219b6e=_0x52e7fc['formats'];if(_0x3f0817=='audio'){const _0x24e369=_0x219b6e['audio'];let _0x1d624b=_0x24e369['find'](_0xf4c396=>_0xf4c396['quality']==0xc0);if(!_0x1d624b)_0x1d624b=_0x24e369['find'](_0x20c9fb=>_0x20c9fb['quality']==0x80);if(!_0x1d624b)_0x1d624b=_0x24e369['find'](_0x539804=>_0x539804['quality']==0x40);if(!_0x1d624b)_0x1d624b=_0x24e369['find'](_0x4c8b6e=>_0x4c8b6e['quality']==0x30);if(!_0x1d624b)return _0x461ae0(![]);return _0x504078(_0x1d624b);}if(_0x3f0817=='video'){if(_0x219b6e['video']['length']==0x0)return _0x461ae0(![]);const _0x460e5f=_0x219b6e['video'][_0x219b6e['video']['length']-0x1];return _0x504078(_0x460e5f);}}),getUrlDl=_0x1a760c=>new Promise(async(_0x280785,_0x47570c)=>{const _0x45688e=await _0x2b39ef('https://srvcdn8.2convert.me/api/json',{'method':'POST','headers':{'content-type':'application/x-www-form-urlencoded;\x20charset=UTF-8','origin':'https://en1.y2mate.is','referer':'https://en1.y2mate.is/','user-agent':'Mozilla/5.0\x20(Windows\x20NT\x2010.0;\x20Win64;\x20x64)\x20AppleWebKit/537.36\x20(KHTML,\x20like\x20Gecko)\x20Chrome/113.0.0.0\x20Safari/537.36\x20OPR/99.0.0.0'},'body':'hash='+encodeURIComponent(_0x1a760c)}),_0x113f40=await _0x45688e['json']();if(_0x113f40['error'])return _0x47570c(![]);let _0x401443=![];while(_0x401443==![]){await sleep(0x3e8);const _0x49bc73=await _0x2b39ef('https://srvcdn8.2convert.me/api/json/task',{'method':'POST','headers':{'content-type':'application/x-www-form-urlencoded;\x20charset=UTF-8','origin':'https://en1.y2mate.is','referer':'https://en1.y2mate.is/','user-agent':'Mozilla/5.0\x20(Windows\x20NT\x2010.0;\x20Win64;\x20x64)\x20AppleWebKit/537.36\x20(KHTML,\x20like\x20Gecko)\x20Chrome/113.0.0.0\x20Safari/537.36\x20OPR/99.0.0.0'},'body':'taskId='+_0x113f40['taskId']}),_0x7e99f4=await _0x49bc73['json']();if(_0x7e99f4['error'])return _0x47570c(![]);if(_0x7e99f4['status']=='finished'){_0x401443=!![],_0x280785(_0x7e99f4);break;}if(_0x7e99f4['status']=='error')return _0x47570c(![]);}});export{bestFormat,getUrlDl};