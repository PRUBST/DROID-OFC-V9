import{WAMessageStubType}from'@whiskeysockets/baileys';import _0x211d22 from'awesome-phonenumber';import _0x4395ff from'chalk';import{watchFile}from'fs';const terminalImage=global['opts']['img']?require('terminal-image'):'',urlRegex=(await import('url-regex-safe'))['default']({'strict':![]});export default async function (m,conn={'user':{}}){const _name=await conn['getName'](m['sender']),sender=_0x211d22('+'+m['sender']['replace']('@s.whatsapp.net',''))['getNumber']('international')+(_name?'\x20~'+_name:''),chat=await conn['getName'](m['chat']);let img;try{global['opts']['img']&&(img=/sticker|image/gi['test'](m['mtype'])?await terminalImage['buffer'](await m['download']()):![]);}catch(e){console['error'](e);}const filesize=(m['msg']?m['msg']['vcard']?m['msg']['vcard']['length']:m['msg']['fileLength']?m['msg']['fileLength']['low']||m['msg']['fileLength']:m['msg']['axolotlSenderKeyDistributionMessage']?m['msg']['axolotlSenderKeyDistributionMessage']['length']:m['text']?m['text']['length']:0x0:m['text']?m['text']['length']:0x0)||0x0,user=global['db']['data']['users'][m['sender']],me=_0x211d22('+'+(conn['user']?.['jid'])['replace']('@s.whatsapp.net',''))['getNumber']('international');console['log']((_0x4395ff['redBright']('%s')+'\x20'+_0x4395ff['black'](_0x4395ff['bgYellow']('%s'))+'\x20'+_0x4395ff['black'](_0x4395ff['bgGreen']('%s'))+'\x20'+_0x4395ff['magenta']('%s\x20[%s\x20%sB]')+'\x0a'+_0x4395ff['green']('%s')+'\x20'+_0x4395ff['yellow']('%s%s')+'\x20'+_0x4395ff['blueBright']('to')+'\x20'+_0x4395ff['green']('%s')+'\x20'+_0x4395ff['black'](_0x4395ff['bgYellow']('%s')))['trim'](),me+'\x20~'+conn['user']['name']+(''+(conn['user']['jid']==global['conn']['user']['jid']?'':'\x20(Sub\x20Bot)')),(m['messageTimestamp']?new Date(0x3e8*(m['messageTimestamp']['low']||m['messageTimestamp'])):new Date())['toTimeString'](),m['messageStubType']?WAMessageStubType[m['messageStubType']]:'',filesize,filesize===0x0?0x0:(filesize/0x3f1**Math['floor'](Math['log'](filesize)/Math['log'](0x3e8)))['toFixed'](0x1),['',...'KMGTP'][Math['floor'](Math['log'](filesize)/Math['log'](0x3e8))]||'',sender,m?m['exp']:'?',user?'|'+user['exp']+'|'+user['limit']:''+('|'+user['level']),m['chat']+(chat?'\x20~'+chat:''),m['mtype']?m['mtype']['replace'](/message$/i,'')['replace']('audio',m['msg']['ptt']?'PTT':'audio')['replace'](/^./,v=>v['toUpperCase']()):'');if(img)console['log'](img['trimEnd']());if(typeof m['text']==='string'&&m['text']){let log=m['text']['replace'](/\u200e+/g,''),mdRegex=/(?<=(?:^|[\s\n])\S?)(?:([*_~`])(?!`)(.+?)\1|```((?:.|[\n\r])+?)```|`([^`]+?)`)(?=\S?(?:[\s\n]|$))/g,mdFormat=(depth=0x4)=>(_,type,text,monospace)=>{let types={'_':'italic','*':'bold','~':'strikethrough','`':'bgGray'};text=text||monospace;let formatted=!types[type]||depth<0x1?text:_0x4395ff[types[type]](text['replace'](/`/g,'')['replace'](mdRegex,mdFormat(depth-0x1)));return formatted;};log=log['replace'](mdRegex,mdFormat(0x4)),log=log['split']('\x0a')['map'](line=>{if(line['trim']()['startsWith']('>'))return _0x4395ff['bgGray']['dim'](line['replace'](/^>/,'┃'));else{if(/^([1-9]|[1-9][0-9])\./['test'](line['trim']()))return line['replace'](/^(\d+)\./,(match,number)=>{const padding=number['length']===0x1?'\x20\x20':'\x20';return padding+number+'.';});else{if(/^[-*]\s/['test'](line['trim']()))return line['replace'](/^[*-]/,'\x20\x20•');}}return line;})['join']('\x0a');log['length']<0x400&&(log=log['replace'](urlRegex,(url,i,text)=>{const end=url['length']+i;return i===0x0||end===text['length']||/^\s$/['test'](text[end])&&/^\s$/['test'](text[i-0x1])?_0x4395ff['blueBright'](url):url;}));log=log['replace'](mdRegex,mdFormat(0x4));if(m['mentionedJid']){for(const user of m['mentionedJid'])log=log['replace']('@'+user['split']`@`[0x0],_0x4395ff['blueBright']('@'+await conn['getName'](user)));}console['log'](m['error']!=null?_0x4395ff['red'](log):m['isCommand']?_0x4395ff['yellow'](log):log);}m['messageStubParameters']&&console['log'](m['messageStubParameters']['map'](jid=>{jid=conn['decodeJid'](jid);const name=conn['getName'](jid);return _0x4395ff['gray'](_0x211d22('+'+jid['replace']('@s.whatsapp.net',''))['getNumber']('international')+(name?'\x20~'+name:''));})['join'](',\x20'));if(/document/i['test'](m['mtype']))console['log']('🗂️\x20'+(m['msg']['fileName']||m['msg']['displayName']||'Document'));else{if(/ContactsArray/i['test'](m['mtype']))console['log']('👨‍👩‍👧‍👦\x20'+('\x20'||''));else{if(/contact/i['test'](m['mtype']))console['log']('👨\x20'+(m['msg']['displayName']||''));else{if(/audio/i['test'](m['mtype'])){const duration=m['msg']['seconds'];console['log']((m['msg']['ptt']?'🎤ㅤ(PTT\x20':'🎵ㅤ(')+'AUDIO)\x20'+Math['floor'](duration/0x3c)['toString']()['padStart'](0x2,0x0)+':'+(duration%0x3c)['toString']()['padStart'](0x2,0x0));}}}}console['log']();}const file=global['__filename'](import.meta['url']);watchFile(file,()=>{console['log'](_0x4395ff['redBright']('Update\x20\x27lib/print.js\x27'));});